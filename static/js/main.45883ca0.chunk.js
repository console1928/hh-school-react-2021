(this["webpackJsonphh-school-react-2021"]=this["webpackJsonphh-school-react-2021"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),r=n(9),a=n.n(r),i=n(10),o=n(2),l=n(11),u=n(4),b=(n(16),n(0)),j=function(e){return Object(b.jsx)("button",Object(u.a)(Object(u.a)({},e),{},{className:"custom-button--".concat(e.buttonstyle,"--").concat(e.buttontype)}))},d=(n(18),function(e){return Object(b.jsxs)(s.a.Fragment,{children:[Object(b.jsx)("input",Object(u.a)(Object(u.a)({},e),{},{className:"custom-input".concat(e.errormessage?"--error":"")})),e.errormessage&&Object(b.jsx)("div",{className:"custom-input__error-message",children:e.errormessage})]})}),g=(n(19),function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),s=n[0],r=n[1],a=Object(c.useRef)(null),i=Object(c.useCallback)((function(t){e.clearErrorMessage(),e.closeModal(t)}),[e]);Object(c.useEffect)((function(){var e=function(e){a.current&&!a.current.contains(e.target)&&i(e)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[e,a,i]);return Object(b.jsx)("div",{className:"input-modal-window",children:Object(b.jsxs)("div",{className:"input-modal-window__content",ref:a,children:[Object(b.jsx)("button",{className:"input-modal-window__close-button",onClick:i,children:"\u274c"}),Object(b.jsx)(d,{className:"input-modal-window__text-input",type:"text",placeholder:e.inputPlaceholder,value:s,onChange:function(t){r(t.target.value),e.errorMessage&&e.clearErrorMessage()},errormessage:e.errorMessage}),Object(b.jsx)(j,{className:"input-modal-window__add-button",onClick:function(t){t.preventDefault(),e.useModalValue(s)},buttonstyle:"outlined",buttontype:"default",children:e.submitButtonName})]})})}),m={GITHUB_BASE_URL:"https://github.com"},f=(n(20),function(){var e=Object(c.useState)(JSON.parse(localStorage.getItem("blackList"))||[]),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(JSON.parse(localStorage.getItem("blackListIsVisible"))||!1),i=Object(o.a)(a,2),u=i[0],d=i[1],f=Object(c.useState)(!1),O=Object(o.a)(f,2),h=O[0],p=O[1],v=Object(c.useState)(""),x=Object(o.a)(v,2),_=x[0],S=x[1],y=function(e,t){if(""!==e)if("add"!==t||-1===n.indexOf(e)){var c="remove"===t?n.filter((function(t){return t!==e})):[].concat(Object(l.a)(n),[e]);localStorage.setItem("blackList",JSON.stringify(c)),r(c)}else S("User is already in blacklist");else S("Username can not be empty")},N=function(e){e.preventDefault(),p(!h)};return Object(b.jsxs)(s.a.Fragment,{children:[Object(b.jsx)("div",{className:"black-list__caption",children:n.length?Object(b.jsxs)("div",{className:"black-list__users-button",onClick:function(){var e=!u;localStorage.setItem("blackListIsVisible",JSON.stringify(e)),d(e)},children:["Blacklisted reviewers",Object(b.jsx)("div",{className:"black-list__".concat(u?"hide":"show","-users-arrow")})]}):"Blacklist is empty"}),u&&n.map((function(e){return Object(b.jsxs)("div",{className:"black-list__item",children:[Object(b.jsx)("a",{className:"black-list__item-name",href:"".concat(m.GITHUB_BASE_URL,"/").concat(e),children:e}),Object(b.jsx)("button",{className:"black-list__item-button",onClick:function(){return y(e,"remove")},children:"\u274c"})]},e)})),Object(b.jsx)(j,{onClick:N,buttonstyle:"outlined",buttontype:"default",children:"Add GitHub users to blacklist"}),h&&Object(b.jsx)(g,{closeModal:N,useModalValue:function(e){return y(e,"add")},inputPlaceholder:"GitHub login",submitButtonName:"Add user to reviewers blacklist",errorMessage:_,clearErrorMessage:function(){return S("")}})]})}),O=(n(21),function(e){return Object(b.jsxs)("a",{className:"user-card",href:"".concat(m.GITHUB_BASE_URL,"/").concat(e.login),children:[Object(b.jsx)("div",{className:"user-card__image",style:{backgroundImage:"url(".concat(e.image)}}),Object(b.jsx)("div",{className:"user-card__upper-caption",children:e.login}),Object(b.jsx)("div",{children:"(".concat(e.caption,")")})]})}),h=n(6),p=n.n(h),v=n(8),x={API_BASE_URL:"https://api.github.com"},_={getUserData:function(e){return Object(v.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(x.API_BASE_URL,"/users/").concat(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},getRepositoryContributors:function(e){return Object(v.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.split("".concat(m.GITHUB_BASE_URL,"/")),t.next=3,fetch("".concat(x.API_BASE_URL,"/repos/").concat(n[1],"/contributors"));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()}},S=(n(23),function(e){return localStorage.getItem(e)||""}),y=function(e){return"true"===localStorage.getItem(e)||!1},N=function(e){return JSON.parse(localStorage.getItem(e))||{image:"",login:""}},w=function(){var e=Object(c.useState)(y("settingsAreVisible")),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(S("gitHubLogin")),l=Object(o.a)(a,2),u=l[0],g=l[1],m=Object(c.useState)(S("gitHubRepository")),h=Object(o.a)(m,2),p=h[0],v=h[1],x=Object(c.useState)(N("reviewee")),w=Object(o.a)(x,2),k=w[0],I=w[1],C=Object(c.useState)(N("reviewer")),H=Object(o.a)(C,2),A=H[0],B=H[1],L=Object(c.useState)(""),R=Object(o.a)(L,2),U=R[0],E=R[1],M=Object(c.useState)(""),G=Object(o.a)(M,2),J=G[0],P=G[1],T=Object(c.useState)(""),V=Object(o.a)(T,2),D=V[0],F=V[1],q=Object(c.useState)(!1),z=Object(o.a)(q,2),K=z[0],Q=z[1],W=Object(c.useState)(y("userHasContributions")),X=Object(o.a)(W,2),Y=X[0],Z=X[1],$="API rate limit exceeded",ee=function(e,t,n){localStorage.setItem(t,"string"===typeof e?e:JSON.stringify(e)),n(e)},te=function(){ee({image:"",login:""},"reviewee",I),ee({image:"",login:""},"reviewer",B)},ne=function(e,t){return 403===e.status&&t.message&&t.message.indexOf($)>-1},ce=function(e){return e.json().then((function(t){if(e.status>=200&&e.status<300){var n=JSON.parse(localStorage.getItem("blackList"))||[],c=t.filter((function(e){return e.login!==u&&-1===n.indexOf(e.login)}));if(function(e){ee(!1,"userHasContributions",Z);var t,n=Object(i.a)(e);try{for(n.s();!(t=n.n()).done;)t.value.login===u&&ee(!0,"userHasContributions",Z)}catch(c){n.e(c)}finally{n.f()}}(t),c.length){var s=c[Math.floor(Math.random()*c.length)];ee({image:s.avatar_url,login:s.login},"reviewer",B)}}else ne(e,t)?P($):P('Print repository address, for example "https://github.com/console1928/example"')}))};return Object(b.jsxs)("div",{className:"settings",children:[Object(b.jsx)(j,{onClick:function(){var e=!n;localStorage.setItem("settingsAreVisible",e),r(e)},buttonstyle:"outlined",buttontype:"default",children:"Settings"}),n&&Object(b.jsxs)("div",{className:"settings__content",children:[Object(b.jsxs)("form",{className:"settings__form",onSubmit:function(e){e.preventDefault(),E(""),P(""),F(""),te(),""!==u?""!==p?(Q(!0),Promise.all([_.getUserData(u),_.getRepositoryContributors(p)]).then((function(e){var t,n=Object(o.a)(e,2),c=n[0],s=n[1];(t=c,t.json().then((function(e){t.status>=200&&t.status<300?ee({image:e.avatar_url,login:e.login},"reviewee",I):ne(t,e)?E($):E('Print login, for example "console1928"')}))).then((function(){return ce(s)})).then()})).catch((function(){F("An error occured, check your internet connection")})).finally((function(){Q(!1)}))):P("This field should not be empty"):E("This field should not be empty")},children:[Object(b.jsx)(d,{type:"text",placeholder:"GitHub login",value:u,onChange:function(e){return ee(e.target.value,"gitHubLogin",g)},errormessage:U,disabled:K}),Object(b.jsx)(d,{type:"text",placeholder:"GitHub repository",value:p,onChange:function(e){return ee(e.target.value,"gitHubRepository",v)},errormessage:J,disabled:K}),Object(b.jsx)(f,{}),Object(b.jsx)(j,{type:"submit",buttonstyle:"filled",buttontype:"default",disabled:K,children:"Generate reviewer"}),Object(b.jsx)("div",{className:"settings__request-error",children:D})]}),k.login&&!U.length&&!J.length&&!D.length&&Object(b.jsxs)(s.a.Fragment,{children:[Object(b.jsx)("div",{className:"settings__result",children:Y?Object(b.jsxs)(s.a.Fragment,{children:[k.login&&Object(b.jsx)(O,{login:k.login,image:k.image,caption:"Reviewee"}),A.login?Object(b.jsx)(O,{login:A.login,image:A.image,caption:"Reviewer"}):Object(b.jsx)("div",{className:"settings__no-reviewer",children:"No reviewer available"})]}):Object(b.jsx)("div",{className:"settings__no-contributions",children:"Current user has no contributions to this repository. Try changing GitHub login or GitHub repository."})}),Object(b.jsx)(j,{onClick:te,buttonstyle:"filled",buttontype:"danger",children:"Clear Result"})]})]})]})};n(24),n(25);var k=function(){return Object(b.jsx)(w,{})};a.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(k,{})}),document.getElementById("root"))}],[[26,1,2]]]);
//# sourceMappingURL=main.45883ca0.chunk.js.map